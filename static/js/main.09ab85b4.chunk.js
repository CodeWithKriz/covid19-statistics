(this["webpackJsonpcovid19-statistics"]=this["webpackJsonpcovid19-statistics"]||[]).push([[0],{55:function(t,e,s){},65:function(t,e,s){"use strict";s.r(e);var c=s(0),n=s.n(c),a=s(17),r=s.n(a),i=(s(54),s(22)),o=s(5),l=(s(55),s(11)),d=s(19),j=s.n(d),h=s(23),u=s(13),b=s(14),p=s(16),v=s(15),O=s(76),x=s(77),y=s(35),f=s.n(y),m=s(1),g=function(t){Object(p.a)(s,t);var e=Object(v.a)(s);function s(t){var c;return Object(u.a)(this,s),(c=e.call(this,t)).state={series:[{name:"Total Cases",data:Object(l.a)(c.props.covidHistory.totalCases)},{name:"Total Deaths",data:Object(l.a)(c.props.covidHistory.totalDeaths)},{name:"Total Active",data:Object(l.a)(c.props.covidHistory.totalActive)}],options:{chart:{height:350,type:"area"},dataLabels:{enabled:!1},stroke:{curve:"smooth"},xaxis:{type:"datetime",categories:Object(l.a)(c.props.covidHistory.dateTime)},tooltip:{x:{format:"yyyy-MM-dd"}}}},c}return Object(b.a)(s,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)(f.a,{options:this.state.options,series:this.state.series,type:"area",height:250,style:{width:"40rem"}})})}}]),s}(c.Component),S={webServer:{host:"http://127.0.0.1:5000/api/v1/covid_api"},covidAPI:{countries:"https://covid-193.p.rapidapi.com/countries",statistics:"https://covid-193.p.rapidapi.com/statistics",history:"https://covid-193.p.rapidapi.com/history"},img:{loadingGIF:"https://media.giphy.com/media/hWZBZjMMuMl7sWe0x8/giphy.gif"}};function C(t){return t?t.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,","):0}var A=function(t){Object(p.a)(s,t);var e=Object(v.a)(s);function s(t){var c;return Object(u.a)(this,s),(c=e.call(this,t)).handleResetCountry=function(){var t=Object(h.a)(j.a.mark((function t(e,s){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"All"!==c.state.countrySelected&&(c.setState({apiResponse:"",covidStatisticsAPI:"",covidHistoryAPI:""}),c.componentDidMount());case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}(),c.handleCountryChange=function(){var t=Object(h.a)(j.a.mark((function t(e,s){var n,a,r,i,o,d;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={event:e.target.value,data:s.value},a={url:S.covidAPI.statistics},"All"!==s.value&&(a.params={country:s.value}),t.prev=3,c.setState({covidStatisticsAPI:"",covidHistoryAPI:""}),t.next=7,fetch("".concat(S.webServer.host,"?query=").concat(encodeURIComponent(JSON.stringify(a))));case 7:return r=t.sent,t.next=10,r.json();case 10:return r=t.sent,c.setState({countrySelected:n.data,covidStatisticsAPI:r,covidStatistics:c.getCovidStatistics({countries:r.response})}),i={url:S.covidAPI.history,params:{country:s.value}},t.next=15,fetch("".concat(S.webServer.host,"?query=").concat(encodeURIComponent(JSON.stringify(i))));case 15:return o=t.sent,t.next=18,o.json();case 18:o=t.sent,d=c.getCovidHistory({data:Object(l.a)(o.response)}),c.setState({covidHistoryAPI:o,covidHistory:d}),console.log(c.state.covidHistory),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(3),c.setState({error:JSON.stringify(t.t0),apiResponse:"",covidStatisticsAPI:"",covidHistoryAPI:""});case 27:case"end":return t.stop()}}),t,null,[[3,24]])})));return function(e,s){return t.apply(this,arguments)}}(),c.state={apiResponse:"",countryCount:"",countryList:[],countryOptions:[],countrySelected:"",covidStatisticsAPI:"",covidStatistics:[],covidHistoryAPI:"",covidHistory:{},error:""},c}return Object(b.a)(s,[{key:"getCountryOptions",value:function(t){var e=[],s="All";e.push({value:s,name:String(s).toLowerCase(),text:s});for(var c=0;t.countries[c];c++)e.push({value:t.countries[c],name:String(t.countries[c]).toLowerCase(),text:t.countries[c]});return e}},{key:"getCovidStatistics",value:function(t){for(var e=[],s=0;t.countries[s];s++)t.countries[s].continent!==t.countries[s].country&&e.push(t.countries[s]);return e}},{key:"getCovidHistory",value:function(t){var e={totalCases:[],totalDeaths:[],totalActive:[],dateTime:[]},s=[],c=new Date;c.setDate(c.getDate()-179);for(var n=0;n<t.data.length;n++){var a=new Date(t.data[n].time);a>c&&-1===s.indexOf(a.toLocaleDateString().split(",")[0])&&(s.push(a.toLocaleDateString().split(",")[0]),e.totalCases.push(t.data[n].cases.total),e.totalDeaths.push(t.data[n].deaths.total),e.totalActive.push(t.data[n].cases.active),e.dateTime.push(a.toLocaleDateString().split(",")[0]))}return e}},{key:"componentDidMount",value:function(){var t=Object(h.a)(j.a.mark((function t(){var e,s,c,n,a,r,i;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e={url:S.covidAPI.countries},t.next=4,fetch("".concat(S.webServer.host,"?query=").concat(encodeURIComponent(JSON.stringify(e))));case 4:return s=t.sent,t.next=7,s.json();case 7:return s=t.sent,c={url:S.covidAPI.statistics},t.next=11,fetch("".concat(S.webServer.host,"?query=").concat(encodeURIComponent(JSON.stringify(c))));case 11:return n=t.sent,t.next=14,n.json();case 14:return n=t.sent,this.setState({apiResponse:s,countryCount:s.response.length,countryList:["All"].concat(Object(l.a)(s.response)),countryOptions:this.getCountryOptions({countries:Object(l.a)(s.response)}),countrySelected:"All",covidStatisticsAPI:n,covidStatistics:this.getCovidStatistics({countries:Object(l.a)(n.response)})}),a={url:S.covidAPI.history,params:{country:"All"}},t.next=19,fetch("".concat(S.webServer.host,"?query=").concat(encodeURIComponent(JSON.stringify(a))));case 19:return r=t.sent,t.next=22,r.json();case 22:r=t.sent,i=this.getCovidHistory({data:Object(l.a)(r.response)}),this.setState({covidHistoryAPI:r,covidHistory:i}),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(0),this.setState({error:JSON.stringify(t.t0),apiResponse:"",covidStatisticsAPI:"",covidHistoryAPI:""}),alert(t.t0);case 31:case"end":return t.stop()}}),t,this,[[0,27]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state.countrySelected,s=S.img.loadingGIF,c=Object(m.jsx)("img",{className:"loading-gif-style",src:s,alt:"#NA"}),n=function(){var s=Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{children:Object(m.jsx)("strong",{children:"Select Country: "})}),Object(m.jsx)(O.a,{placeholder:"Select Country",fluid:!0,search:!0,selection:!0,options:t.state.countryOptions,onChange:t.handleCountryChange,defaultValue:e,style:{width:"25rem"}}),Object(m.jsx)("br",{}),Object(m.jsx)(x.a,{variant:"primary",onClick:t.handleResetCountry,children:"Reset"})]}),c=Object(m.jsx)("p",{children:"OOPS! Unable to fetch the Country details."});return t.state.countryCount?s:c}(),a=t.state.covidHistoryAPI?Object(m.jsx)(g,{covidHistory:t.state.covidHistory}):c,r=function(){for(var e=t.state.covidStatistics,s=0,c=0,n=0,a=0,r=0,i=0,o=0,l=0,d=0;e[d];d++)s+=e[d].cases.total?e[d].cases.total:0,o+=parseInt(e[d].cases.new)?parseInt(e[d].cases.new):0,c+=e[d].cases.active?e[d].cases.active:0,n+=e[d].cases.critical?e[d].cases.critical:0,a+=e[d].cases.recovered?e[d].cases.recovered:0,r+=e[d].deaths.total?e[d].deaths.total:0,l+=parseInt(e[d].deaths.new)?parseInt(e[d].deaths.new):0,i+=e[d].tests.total?e[d].tests.total:0;var j=Object(m.jsxs)("span",{className:"new-cases-span",children:["( ","+ "+C(o)," )"]}),h=Object(m.jsxs)("span",{className:"new-cases-span",children:["( ","+ "+C(l)," )"]}),u=Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Total Cases"}),Object(m.jsxs)("td",{children:[C(s)," ",j]})]}),b=Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Total Active"}),Object(m.jsx)("td",{children:C(c)})]}),p=Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Total Critical"}),Object(m.jsx)("td",{children:C(n)})]}),v=Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Total Recovered"}),Object(m.jsx)("td",{children:C(a)})]}),O=Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Total Deaths"}),Object(m.jsxs)("td",{children:[C(r)," ",h]})]}),x=Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Total Tests"}),Object(m.jsx)("td",{children:C(i)})]});return Object(m.jsxs)("tbody",{className:"font-weight-bold",children:[u,b,p,v,O,x]})}(),i=Object(m.jsxs)("div",{children:[Object(m.jsxs)("p",{className:"font-header-3",children:["Region: ",e]}),Object(m.jsx)("table",{className:"covid-statistics-table",children:Object(m.jsxs)("tbody",{children:[Object(m.jsx)("tr",{style:{textAlign:"center"},children:Object(m.jsx)("td",{children:"Covid Statistics"})}),Object(m.jsx)("tr",{children:Object(m.jsx)("td",{children:Object(m.jsx)("table",{children:r})})})]})})]}),o=function(){for(var e=t.state.covidStatistics,s=0,c=0;e[c];c++)s+=e[c].population;return s}(),l=Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"font-header-4",children:"Total Population"}),Object(m.jsx)("div",{className:"scrollable-population-table",children:Object(m.jsxs)("table",{className:"total-population-table",children:[Object(m.jsx)("thead",{className:"font-weight-bold",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Continent"}),Object(m.jsx)("th",{children:"Country"}),Object(m.jsx)("th",{children:"Population"})]})}),Object(m.jsxs)("tbody",{children:[function(){if("All"===e)return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"All"}),Object(m.jsx)("td",{children:"All"}),Object(m.jsx)("td",{children:o?C(o):null})]},"All")}(),this.state.covidStatistics.map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.continent}),Object(m.jsx)("td",{children:t.country}),Object(m.jsx)("td",{children:t.population?C(t.population):null})]},t.country)}))]})]})})]}),d=function(){var e=Object(m.jsx)("p",{className:"font-header-3",children:"Reported Cases and Deaths by Country or Territory"}),s=Object(m.jsxs)("div",{children:[Object(m.jsx)("p",{className:"header-title",children:"[Error]"}),Object(m.jsx)("p",{children:"Unable to fetch the Covid Statistics Report"})]}),r=t.state.covidStatisticsAPI?Object(m.jsx)("div",{children:i}):c,o=t.state.covidStatisticsAPI?Object(m.jsx)("div",{children:l}):c,d=Object(m.jsxs)("div",{className:"default-app-settings",children:[Object(m.jsx)("table",{className:"country-graph-table",children:Object(m.jsx)("tbody",{children:Object(m.jsxs)("tr",{children:[Object(m.jsxs)("td",{style:{textAlign:"left"},children:[" ",e," ",n," ",Object(m.jsx)("br",{})," ",r," "]}),Object(m.jsxs)("td",{style:{float:"right"},children:[" ",a," ",Object(m.jsx)("br",{})," ",o," "]})]})})}),Object(m.jsx)("br",{})]});return t.state.error?s:t.state.apiResponse?d:c}();return Object(m.jsx)("div",{children:d})}}]),s}(c.Component),I=function(t){Object(p.a)(s,t);var e=Object(v.a)(s);function s(){return Object(u.a)(this,s),e.apply(this,arguments)}return Object(b.a)(s,[{key:"render",value:function(){return Object(m.jsx)("div",{children:Object(m.jsx)("p",{className:"header-title",children:Object(m.jsxs)(i.b,{to:"/covid19-statistics",children:[Object(m.jsx)("img",{src:"/covid19-statistics/static/img/Covid19.png",alt:"#NA",width:50}),"\xa0Covid'19 Statistics"]})})})}}]),s}(c.Component),w=function(t){Object(p.a)(s,t);var e=Object(v.a)(s);function s(){return Object(u.a)(this,s),e.apply(this,arguments)}return Object(b.a)(s,[{key:"render",value:function(){return Object(m.jsxs)("div",{className:"footer",children:[Object(m.jsxs)("span",{style:{textAlign:"left"},children:["Developed using:\u2003",Object(m.jsx)("a",{href:"https://reactjs.org/",target:"_blank",rel:"noreferrer",children:Object(m.jsx)("i",{className:"fab fa-react"})})]}),Object(m.jsxs)("span",{style:{float:"right"},children:["Developed by:\u2003",Object(m.jsx)("a",{href:"https://www.linkedin.com/in/sathish-krishnan-venkatachalam-b9a002137/",target:"_blank",rel:"noreferrer",children:Object(m.jsx)("i",{className:"fab fa-linkedin"})})]})]})}}]),s}(c.Component);var N=function(){return Object(m.jsx)("div",{className:"content",children:Object(m.jsxs)(i.a,{children:[Object(m.jsx)(I,{}),Object(m.jsx)(o.c,{children:Object(m.jsxs)(o.a,{exact:!0,path:"/covid19-statistics",children:[" ",Object(m.jsx)(A,{})," "]})}),Object(m.jsx)(w,{})]})})};r.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(N,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.09ab85b4.chunk.js.map