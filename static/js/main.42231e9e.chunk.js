(this["webpackJsonpcovid19-statistics"]=this["webpackJsonpcovid19-statistics"]||[]).push([[0],{112:function(t,e,s){},226:function(t,e,s){"use strict";s.r(e);var c=s(0),a=s.n(c),r=s(23),i=s.n(r),n=(s(111),s(43)),o=s(10),l=(s(112),s(9)),d=s(26),j=s.n(d),h=s(44),b=s(3),u=s(4),v=s(7),p=s(6),O=s(237),x=s(238),f=s(94),y=s(1),g=function(t){Object(v.a)(s,t);var e=Object(p.a)(s);function s(t){var c;return Object(b.a)(this,s),(c=e.call(this,t)).state={type:"line",labels:Object(l.a)(c.props.labels),datasets:[{label:c.props.chartTitle,data:Object(l.a)(c.props.series),fill:!0,backgroundColor:"rgba(".concat(c.props.bgColor,", 0.2)"),borderColor:"rgba(".concat(c.props.bgColor,", 1)"),pointRadius:0}],options:{responsive:!0,tooltips:{mode:"index",intersect:!1},hover:{mode:"nearest",intersect:!0}}},c}return Object(u.a)(s,[{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsx)(f.a,{data:this.state,height:150,style:{width:"35rem"}})})}}]),s}(c.Component),m={webServer:{host:"https://krish-flask-app-v1.herokuapp.com/api/v2/covid_api"},covidAPI:{countries:"/country",statistics:"/statistics",history:"/history"},img:{loadingGIF:"https://media.giphy.com/media/hWZBZjMMuMl7sWe0x8/giphy.gif"}};function S(t){return t?t.toString().replace(/\B(?<!\.\d*)(?=(\d{3})+(?!\d))/g,","):0}var C=function(t){Object(v.a)(s,t);var e=Object(p.a)(s);function s(t){var c;return Object(b.a)(this,s),(c=e.call(this,t)).handleResetCountry=function(){var t=Object(h.a)(j.a.mark((function t(e,s){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"All"!==c.state.countrySelected&&(c.setState({apiResponse:"",covidStatisticsAPI:"",covidHistoryAPI:""}),c.componentDidMount());case 1:case"end":return t.stop()}}),t)})));return function(e,s){return t.apply(this,arguments)}}(),c.handleCountryChange=function(){var t=Object(h.a)(j.a.mark((function t(e,s){var a,r,i,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={event:e.target.value,data:s.value},t.prev=1,c.setState({covidStatisticsAPI:"",covidHistoryAPI:""}),t.next=5,fetch("".concat(m.webServer.host).concat(m.covidAPI.statistics,"|").concat(s.value));case 5:return r=t.sent,t.next=8,r.json();case 8:return r=[(r=t.sent).statistics],c.setState({countrySelected:a.data,covidStatisticsAPI:r,covidStatistics:r}),t.next=13,fetch("".concat(m.webServer.host).concat(m.covidAPI.history,"|").concat(s.value));case 13:return i=t.sent,t.next=16,i.json();case 16:i=(i=t.sent).history,n=c.getCovidHistory({data:Object(l.a)(i)}),c.setState({covidHistoryAPI:i,covidHistory:n}),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),c.setState({error:JSON.stringify(t.t0),apiResponse:"",covidStatisticsAPI:"",covidHistoryAPI:""});case 25:case"end":return t.stop()}}),t,null,[[1,22]])})));return function(e,s){return t.apply(this,arguments)}}(),c.state={apiResponse:"",countryCount:"",countryList:[],countryOptions:[],countrySelected:"",covidStatisticsAPI:"",covidStatistics:[],covidHistoryAPI:"",covidHistory:{},error:""},c}return Object(u.a)(s,[{key:"getCountryOptions",value:function(t){for(var e=[],s=0;t.countries[s];s++)e.push({value:t.countries[s],name:String(t.countries[s]).toLowerCase(),text:t.countries[s]});return e}},{key:"getCovidHistory",value:function(t){var e={totalCases:[],totalDeaths:[],totalActive:[],dateTime:[]},s=[],c=t.data;c.sort((function(t,e){var s=new Date(t.day),c=new Date(e.day);return s<c?-1:s>c?1:0}));for(var a=0;a<c.length;a++){var r=new Date(c[a].day);r=r.toLocaleDateString().split(",")[0],-1===s.indexOf(r)&&(e.totalCases.push(c[a].cases.total),e.totalDeaths.push(c[a].deaths.total),e.totalActive.push(c[a].cases.active),e.dateTime.push(r),s.push(r))}return e}},{key:"componentDidMount",value:function(){var t=Object(h.a)(j.a.mark((function t(){var e,s,c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(m.webServer.host).concat(m.covidAPI.countries));case 3:return e=t.sent,t.next=6,e.json();case 6:return e=(e=t.sent).countries,t.next=10,fetch("".concat(m.webServer.host).concat(m.covidAPI.statistics,"|All"));case 10:return s=t.sent,t.next=13,s.json();case 13:return s=[(s=t.sent).statistics],this.setState({apiResponse:e,countryCount:e.length,countryList:Object(l.a)(e),countryOptions:this.getCountryOptions({countries:Object(l.a)(e)}),countrySelected:"All",covidStatisticsAPI:s,covidStatistics:s}),t.next=18,fetch("".concat(m.webServer.host).concat(m.covidAPI.history,"|All"));case 18:return c=t.sent,t.next=21,c.json();case 21:c=(c=t.sent).history,a=this.getCovidHistory({data:Object(l.a)(c)}),this.setState({covidHistoryAPI:Object(l.a)(c),covidHistory:a}),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(0),this.setState({error:JSON.stringify(t.t0),apiResponse:"",covidStatisticsAPI:"",covidHistoryAPI:""}),alert(t.t0);case 31:case"end":return t.stop()}}),t,this,[[0,27]])})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this,e=this.state.countrySelected,s=m.img.loadingGIF,c=Object(y.jsx)("img",{className:"loading-gif-style",src:s,alt:"#NA"}),a=function(){var s=Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{children:Object(y.jsx)("strong",{children:"Select Country: "})}),Object(y.jsx)(O.a,{placeholder:"Select Country",fluid:!0,search:!0,selection:!0,options:t.state.countryOptions,onChange:t.handleCountryChange,defaultValue:e,style:{width:"25rem"}}),Object(y.jsx)("br",{}),Object(y.jsx)(x.a,{variant:"primary",onClick:t.handleResetCountry,children:"Reset"})]}),c=Object(y.jsx)("p",{children:"OOPS! Unable to fetch the Country details."});return t.state.countryCount?s:c}(),r=function(){var e=Object(y.jsxs)("div",{children:[Object(y.jsx)(g,{chartTitle:"Total Cases",series:t.state.covidHistory.totalCases,labels:t.state.covidHistory.dateTime,bgColor:"0, 110, 255"}),Object(y.jsx)(g,{chartTitle:"Total Deaths",series:t.state.covidHistory.totalDeaths,labels:t.state.covidHistory.dateTime,bgColor:"255, 50, 0"}),Object(y.jsx)(g,{chartTitle:"Total Active",series:t.state.covidHistory.totalActive,labels:t.state.covidHistory.dateTime,bgColor:"0, 255, 30"})]});return t.state.covidHistoryAPI?Object(y.jsx)("div",{children:e}):c}(),i=function(){for(var e=t.state.covidStatistics,s=0,c=0,a=0,r=0,i=0,n=0,o=0,l=0,d=0,j=0;e[j];j++)s+=e[j].cases.total?e[j].cases.total:0,l+=parseInt(e[j].cases.new)?parseInt(e[j].cases.new):0,c+=e[j].cases.active?e[j].cases.active:0,a+=e[j].cases.critical?e[j].cases.critical:0,r+=e[j].cases.recovered?e[j].cases.recovered:0,i+=e[j].deaths.total?e[j].deaths.total:0,d+=parseInt(e[j].deaths.new)?parseInt(e[j].deaths.new):0,n+=e[j].tests.total?e[j].tests.total:0,o+=e[j].population?e[j].population:0;var h=Object(y.jsxs)("span",{className:"new-cases-span",children:["( ","+ "+S(l)," )"]}),b=Object(y.jsxs)("span",{className:"new-cases-span",children:["( ","+ "+S(d)," )"]}),u=Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Total Cases"}),Object(y.jsxs)("td",{children:[S(s)," ",h]})]}),v=Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Total Active"}),Object(y.jsx)("td",{children:S(c)})]}),p=Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Total Critical"}),Object(y.jsx)("td",{children:S(a)})]}),O=Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Total Recovered"}),Object(y.jsx)("td",{children:S(r)})]}),x=Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Total Deaths"}),Object(y.jsxs)("td",{children:[S(i)," ",b]})]}),f=Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Total Tests"}),Object(y.jsx)("td",{children:n?S(n):"NA"})]}),g=Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:"Total Population"}),Object(y.jsx)("td",{children:o?S(o):"NA"})]});return Object(y.jsxs)("tbody",{className:"font-weight-bold",children:[u,v,p,O,x,f,g]})}(),n=Object(y.jsxs)("div",{children:[Object(y.jsxs)("p",{className:"font-header-3",children:["Region: ",e]}),Object(y.jsx)("table",{className:"covid-statistics-table",children:Object(y.jsxs)("tbody",{children:[Object(y.jsx)("tr",{style:{textAlign:"center"},children:Object(y.jsx)("td",{children:"Covid Statistics"})}),Object(y.jsx)("tr",{children:Object(y.jsx)("td",{children:Object(y.jsx)("table",{children:i})})})]})})]}),o=function(){var e=Object(y.jsx)("p",{className:"font-header-3",children:"Reported Cases and Deaths by Country or Territory"}),s=Object(y.jsxs)("div",{children:[Object(y.jsx)("p",{className:"header-title",children:"[Error]"}),Object(y.jsx)("p",{children:"Unable to fetch the Covid Statistics Report"})]}),i=t.state.covidStatisticsAPI?Object(y.jsx)("div",{children:n}):c,o=Object(y.jsxs)("div",{className:"default-app-settings",children:[Object(y.jsx)("table",{className:"country-graph-table",children:Object(y.jsx)("tbody",{children:Object(y.jsxs)("tr",{children:[Object(y.jsxs)("td",{style:{textAlign:"left"},children:[" ",e," ",a," ",Object(y.jsx)("br",{})," ",i," "]}),Object(y.jsxs)("td",{style:{float:"right"},children:[" ",r," "]})]})})}),Object(y.jsx)("br",{})]});return t.state.error?s:t.state.apiResponse?o:c}();return Object(y.jsx)("div",{children:o})}}]),s}(c.Component),A=function(t){Object(v.a)(s,t);var e=Object(p.a)(s);function s(){return Object(b.a)(this,s),e.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return Object(y.jsx)("div",{children:Object(y.jsx)("p",{className:"header-title",children:Object(y.jsxs)(n.b,{to:"/covid19-statistics",children:[Object(y.jsx)("img",{src:"/covid19-statistics/static/img/Covid19.png",alt:"#NA",width:50}),"\xa0Covid'19 Statistics"]})})})}}]),s}(c.Component),k=function(t){Object(v.a)(s,t);var e=Object(p.a)(s);function s(){return Object(b.a)(this,s),e.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){return Object(y.jsxs)("div",{className:"footer",children:[Object(y.jsxs)("span",{style:{textAlign:"left"},children:["Developed using:\u2003",Object(y.jsx)("a",{href:"https://reactjs.org/",target:"_blank",rel:"noreferrer",children:Object(y.jsx)("i",{className:"fab fa-react"})}),"\u2003",Object(y.jsx)("a",{href:"https://mongodb.com/",target:"_blank",rel:"noreferrer",children:Object(y.jsx)("i",{className:"fas fa-database"})}),"\u2003",Object(y.jsx)("a",{href:"https://github.com/sathish2krishnan/covid19-statistics",target:"_blank",rel:"noreferrer",children:Object(y.jsx)("i",{className:"fab fa-github"})}),"\u2003",Object(y.jsx)("a",{href:"https://krish-flask-app-v1.herokuapp.com/api/v1/Sathish",target:"_blank",rel:"noreferrer",children:Object(y.jsx)("i",{className:"fas fa-server"})}),"\u2003",Object(y.jsx)("a",{href:"https://api-sports.io/documentation/covid-19/v1",target:"_blank",rel:"noreferrer",children:Object(y.jsx)("i",{className:"fas fa-table"})})]}),Object(y.jsxs)("span",{style:{float:"right"},children:["Developed by:\u2003",Object(y.jsx)("a",{href:"https://www.linkedin.com/in/sathish-krishnan-venkatachalam-b9a002137/",target:"_blank",rel:"noreferrer",children:Object(y.jsx)("i",{className:"fab fa-linkedin"})})]})]})}}]),s}(c.Component);var w=function(){return Object(y.jsx)("div",{className:"content",children:Object(y.jsxs)(n.a,{children:[Object(y.jsx)(A,{}),Object(y.jsx)(o.c,{children:Object(y.jsxs)(o.a,{exact:!0,path:"/covid19-statistics",children:[" ",Object(y.jsx)(C,{})," "]})}),Object(y.jsx)(k,{})]})})};i.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(w,{})}),document.getElementById("root"))}},[[226,1,2]]]);
//# sourceMappingURL=main.42231e9e.chunk.js.map